.game-root {
  position: fixed;
  inset: 0;
  background: var(--bg);
}

.game-squares {
  position: fixed;
  inset: 0;
  z-index: 0;
}

.game-main {
  position: relative;
  z-index: 1;
  display: flex;
  gap: 16px;
  padding: 24px;
  box-sizing: border-box;
  height: 100%;
  align-items: center;
  padding-left: 260px;
  padding-right: 200px;
}

.battle-area {
  flex: 1 1 auto;
  display: flex;
  gap: 24px;
  align-items: center;
  justify-content: center;
  position: relative;
}

.battle-box {
  flex: 0 0 760px;
  background: linear-gradient(#070707, #121212);
  border: 2px solid var(--blue);
  border-radius: 14px;
  padding: 48px 48px;
  box-sizing: border-box;
  color: var(--text);
  margin: 0 auto;
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-family: Pixelify;
  box-shadow: 0 18px 40px rgba(0,0,0,0.45), 0 0 0 6px rgba(83,203,214,0.06);
  min-height: 520px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

/* Mortal Kombat style HUD */
.mk-hud {
  position: absolute;
  top: 14px;
  left: 24px;
  right: 24px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 12;
  pointer-events: none;
}
.mk-left,
.mk-right { display:flex; flex-direction:column; gap:8px; width:40%; }
.mk-left { align-items:flex-start }
.mk-right { align-items:flex-end }
.mk-wins { font-family: Pixelify; font-size:0.95rem; color: #ffd966; text-shadow: 0 2px 0 rgba(0,0,0,0.6) }
.mk-name { font-weight:800; font-size:1rem; margin-top:4px; color: #ffd; text-shadow: 0 2px 0 rgba(0,0,0,0.6) }
.mk-bar { width:100%; max-width:520px; height:18px; background: rgba(0,0,0,0.6); border-radius:6px; overflow:hidden; border:2px solid rgba(255,255,255,0.03) }
.mk-fill { height:100%; background: linear-gradient(90deg,#9df2a6,#10B981); box-shadow: inset 0 -4px 8px rgba(0,0,0,0.4) }
.mk-timer { font-family: Pixelify; font-size:46px; color:#ff2d2d; text-shadow: 0 6px 0 rgba(0,0,0,0.6); pointer-events:none }

/* hide legacy small HUDs inside arena when using MK layout */
.arena-scene .hud { display: none }

/* darker stage floor effect */
.arena-bg { filter: contrast(0.9) brightness(0.85) }
.sprite.player { left:6%; bottom:18px; }
.sprite.opponent { right:6%; bottom:18px; }

.battle-top,
.battle-bottom {
  text-align: center;
  padding: 10px 0;
}

.poke-name { font-weight: 600; margin-bottom: 6px; font-size: 1.2rem;}
.hp-bar { font-size: 0.95rem; opacity: 0.9; font-family: Satoshi;}

.battle-arena {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 420px;
  position: relative;
}

.arena-scene { position: relative; width: 760px; max-width: 100%; height: 420px; display:block; }
.arena-bg { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; border-radius:8px; image-rendering: pixelated; image-rendering: crisp-edges; -moz-image-rendering: pixelated; }
.sprite { position:absolute; width:32%; max-width:240px; height:auto; z-index:4; image-rendering: pixelated; image-rendering: crisp-edges; -moz-image-rendering: pixelated; }
.sprite.player { left:6%; bottom:18px; }
.sprite.opponent { right:6%; bottom:18px; }

.hud { position: absolute; z-index: 6; pointer-events: none; display:flex; flex-direction:column; gap:8px }
.opponent-hud { right: 6%; top: 12px; align-items: flex-end; text-align: right }
.player-hud { left: 6%; bottom: 48px; align-items: flex-start; text-align: left }
.hud .poke-name { background: rgba(0,0,0,0.6); padding:6px 10px; border-radius:8px; color:var(--text); font-weight:700; font-size:0.95rem; border:1px solid rgba(255,255,255,0.04) }
.hud .hp-bar { width: 180px; height:12px; background: rgba(0,0,0,0.45); border-radius:8px; overflow:hidden; box-shadow: inset 0 -2px 0 rgba(0,0,0,0.25) }
.hud .hp-fill { height:100%; background:#10B981; width:100% }
.hud .hp-fill.low { background:#EF4444; box-shadow: inset 0 -2px 6px rgba(0,0,0,0.2) }


.game_controls {
  width: 260px;
  display:flex;
  gap:18px;
  flex-direction:column;
  box-sizing:border-box;
  align-items: flex-start;
  position: absolute;
  right: 0;
  top: 72px;
}

.team-column {
  position: fixed;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 220px;
  display:flex;
  flex-direction:column;
  gap:20px;
  align-items:center;
  z-index: 6;
  font-family: Pixelify;
}

.moves { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-top: 36px; }
.move { padding:14px 20px; border-radius:10px; background:var(--purple); color:var(--text); border:none; cursor:pointer; box-shadow: 0 6px 0 rgba(0,0,0,0.45); width:100%; font-size: 1.05rem; font-weight:600 }
.move:active { transform: translateY(2px); box-shadow: 0 4px 0 rgba(0,0,0,0.45) }
.move:focus { outline: none }


.team { display:flex; gap:12px; flex-direction:column; width:100%; align-items:center }
.team-slot { padding:18px 22px; border-radius:6px; background: var(--bg); border:2px solid var(--blue); color:var(--text); cursor:pointer; box-shadow: none; width:240px; text-align:center; font-size:26px; font-weight:700; image-rendering: pixelated; -moz-image-rendering: pixelated; }
.team-slot:hover { transform: translateY(-3px); box-shadow: none }

@media (max-width: 900px) {
  .team-column { position: static; transform: none; width:100%; top:auto; left:auto; padding:0; }
  .team-slot { width: 100%; font-size:16px; padding:10px 12px; border-radius:6px; box-shadow: none }
}


.game-sidebar { position: fixed; right: -40px; top: 50%; transform: translateY(-50%); width: 220px; height: 520px; display:flex; flex-direction:column; z-index: 8; padding: 18px; border-radius: 12px; background: transparent }
.log-panel { background: var(--bg); border:2px solid var(--blue); padding:22px; border-radius:14px; color:var(--text); flex: 1 1 auto; overflow:auto; box-sizing:border-box; box-shadow: 0 20px 50px rgba(0,0,0,0.45), 0 0 0 8px rgba(83,203,214,0.06); padding-right: 2vw; }
.log-panel h4 { margin:0 0 8px 0; text-align:center; font-size:1.5rem; font-weight:700; position: sticky; top: 0; background: var(--bg);}
.log-entry { margin:10px 0; font-size:1.05rem; line-height:1.4 }
.chat-panel { background: var(--bg); border:2px solid var(--blue); padding:14px; border-radius:12px; display:flex; flex-direction:column; gap:8px; flex: 0 0 auto; box-shadow: 0 8px 0 rgba(0,0,0,0.45) }
.chat-input { padding:12px 14px; border-radius:8px; border:2px solid var(--blue); background:transparent; color:var(--text); box-sizing:border-box; width:100%; font-family: Satoshi; }

@media (max-width: 900px) {
  .battle-box { width: 100%; }
  .battle-box { position: static; transform: none; }
  .game_controls { width: 100%; }
  .game-sidebar { width: 100%; height: auto; position: static; transform: none }
  .game-main { flex-direction: column; padding:12px; padding-left: 12px; padding-right: 12px }
  .game_controls { position: static; right: auto; top: auto }
}

.exp-overlay { position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; z-index: 40 }
.exp-card { width: 520px; background: linear-gradient(#0b0b0b,#121212); border:4px solid var(--blue); padding:24px; border-radius:8px; box-shadow: 0 30px 60px rgba(0,0,0,0.6); text-align:center; font-family: Pixelify }
.exp-title { font-size:1.4rem; font-weight:800; margin-bottom:12px }
.exp-bar { height:22px; background: #070707; border:4px solid rgba(83,203,214,0.12); border-radius:6px; overflow:hidden; box-shadow: inset 0 -4px 0 rgba(0,0,0,0.5); margin: 14px 0; position:relative }
.exp-fill { height:100%; background-image: linear-gradient(90deg,#53cbd6,#10b981), repeating-linear-gradient(90deg, rgba(0,0,0,0.06) 0 10px, transparent 10px 20px); background-blend-mode: overlay; width:0%; transition: width 120ms steps(8,end); image-rendering: pixelated; box-shadow: inset 0 -3px 0 rgba(0,0,0,0.4); border-right:2px solid rgba(0,0,0,0.2) }
.exp-info { display:flex; justify-content:space-between; font-weight:700; margin-top:8px }
.exp-countdown { margin-top:14px; font-size:1.2rem; font-family: Pixelify; color:#ffd966 }
.exp-bar:before { content: ""; position:absolute; inset:0; background-image: repeating-linear-gradient(90deg, rgba(0,0,0,0.08) 0 6px, transparent 6px 12px); pointer-events:none }
